
#include "conio.h"
#include "stdlib.h"

#define presskey(k) (key & (k))

#define button_A		0x80

#define button_B		0x40

#define button_SELECT	0x20

#define button_START	0x10

#define button_UP		0x08

#define button_DOWN		0x04

#define button_LEFT		0x02

#define button_RIGHT	0x01

char const data[1024] = {
//0	1	2	3	4	5	6	7	8	9	A	B	C	D	E	F
//0
0x07,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00, //0
0x01,0x01,0x01,0x01,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //1
0x05,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //2
0x04,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //3
0x07,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00, //4
0x01,0x01,0x01,0x01,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //5
0x05,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //6
0x04,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //7
//1
0x0B,0x09,0x00,0x00,0x08,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //8
0x02,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //9
0x0B,0x09,0x00,0x00,0x08,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //A
0x02,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //B
0x0B,0x09,0x00,0x00,0x08,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //C
0x02,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //D
0x0B,0x09,0x00,0x00,0x08,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //E
0x02,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, //F
//2
0x00,0x07,0x00,0x00,0x0B,0x0A,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x02,0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x05,0x09,0x00,0x00,0x00,0x08,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x03,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x07,0x00,0x00,0x0B,0x0A,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x02,0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x05,0x09,0x00,0x00,0x00,0x08,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x03,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//3
0x07,0x00,0x00,0x00,0x08,0x09,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x02,0x02,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x0B,0x04,0x00,0x05,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x07,0x00,0x00,0x00,0x08,0x09,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x02,0x02,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x0B,0x04,0x00,0x05,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//4
0x07,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x08,0x04,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x02,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x07,0x00,0x05,0x02,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x03,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x05,0x09,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x02,0x02,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x0B,0x02,0x04,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x01,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//5
0x0B,0x04,0x00,0x00,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x01,0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x07,0x00,0x00,0x00,0x08,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x03,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x07,0x00,0x00,0x00,0x03,0x00,0x00,0x05,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x02,0x02,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x05,0x02,0x09,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x03,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//6
0x00,0x07,0x00,0x00,0x05,0x0F,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x03,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x07,0x00,0x00,0x05,0x0C,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x02,0x02,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x05,0x0D,0x04,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x02,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x07,0x00,0x00,0x00,0x0E,0x04,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x02,0x01,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//7
//0 ,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15
0x00,0x01,0x05,0x03,0x01,0x05,0x06,0x07,0x08,0x07,0x06,0x0B,0x03,0x0B,0x0E,0x08,
0x00,0x01,0x04,0x03,0x04,0x01,0x06,0x07,0x06,0x09,0x0A,0x07,0x0C,0x09,0x03,0x0A,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x11,0x11,0x11,0x11,0x11,0x11,//<<rnd
0x11,0x11,0x12,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x23,0x33,0x33,0x33,0x33,//<<rnd
0x33,0x33,0x33,0x33,0x33,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x55,0x55,//<<rnd
0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66 //<<rnd
};
//free:16*6 + 11*4*7 = 404 byte

char const img[512] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//0
0xFF,0xFF,0xC3,0xC3,0xC3,0xC3,0xFF,0xFF,0x01,0x03,0x3F,0x3F,0x3F,0x3F,0x7F,0xFF,//1
0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,//2
0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,//3
0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xFF,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x7F,0xFF,//4
0xFF,0xFF,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x01,0x03,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,//5
0xFF,0xFF,0x03,0x03,0x03,0x03,0xFF,0xFF,0x01,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,//6
0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0xFF,0xFF,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x7F,0xFF,//7
0xFF,0xFF,0x03,0x03,0x03,0x03,0xC3,0xC3,0x01,0x03,0xFF,0xFF,0xFF,0xFF,0xBF,0x3F,//8
0xC3,0xC3,0xC0,0xC0,0xC0,0xC0,0xFF,0xFF,0x3E,0x3C,0x3F,0x3F,0x3F,0x3F,0x7F,0xFF,//9
0xC3,0xC3,0x03,0x03,0x03,0x03,0xFF,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,//10
0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0xC3,0xC3,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,//11
0xC3,0xC3,0x00,0x00,0x00,0x00,0xFF,0xFF,0x3E,0x3C,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,//12
0xC3,0xC3,0xC0,0xC0,0xC0,0xC0,0xC3,0xC3,0x3E,0x3C,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,//13
0xFF,0xFF,0x00,0x00,0x00,0x00,0xC3,0xC3,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xBF,0x3F,//14
0xC3,0xC3,0x03,0x03,0x03,0x03,0xC3,0xC3,0x3F,0x3F,0xFF,0xFF,0xFF,0xFF,0xBF,0x3F,//15

0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,//0 MM
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x38,0x24,0x24,0x38,0x20,0x20,0x20,0x20,//1 P
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x38,//2 U
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x3C,0x40,0x40,0x38,0x04,0x04,0x04,0x78,//3 S
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x44,0x44,0x44,0x7C,0x44,0x44,0x44,0x44,//4 H
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x10,0x28,0x44,0x7C,0x44,0x44,0x44,0x44,//5 A
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x44,0x48,0x50,0x60,0x50,0x48,0x44,0x44,//6 K
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7C,0x40,0x40,0x7C,0x40,0x40,0x40,0x7C,//7 E
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x44,0x28,0x28,0x10,0x10,0x10,0x10,0x10,//8 Y
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//9
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//A
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//B
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//C
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//D
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//E
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 //F
};


char Board[200];
int PosX;
int PosY;
int NextShapeNo;
int NowShapeNo;
int NowDirectionNo;

char getNowBlock(int i,int j){
	int idx = (NowShapeNo<<7)+(NowDirectionNo<<5)+(i<<2)+j;
	return data[idx];
}
char getNextBlock(int i,int j){
	int idx = (NextShapeNo<<7)+(i<<2)+j;
	return data[idx];
}
char getNowBottom(int i){
	int idx = (NowShapeNo<<7)+(NowDirectionNo<<5)+i+16;
	return data[idx];
}
char getNowLeft(){
	int idx = (NowShapeNo<<7)+(NowDirectionNo<<5)+20;
	return data[idx];
}
void setBoard(int x,int y,int val){
	int base=(y<<3)+(y<<1);//*10
	Board[base+x] = val;
}
char getBoard(int x,int y){
	int base=(y<<3)+(y<<1);//*10
	return Board[base+x];
}
int getRnd7(){
	int r;
	char v;
	r = rand();
	v = data[0x03C0+(r&0x3F)];
	if((r&0x40)==0)
	{
		return v&0x0F;
	}
	else
	{
		return (v>>4)&0x0F;
	}
	//return 0;//return Math.floor(Math.random()*7);
}

//core
void Clear(){
	int i,j;
	for(i=0;i<10;i++)
	{
		for(j=0;j<20;j++)
		{
			setBoard(i,j,0);
		}
	}
}

void NextShape(){
	NowShapeNo = NextShapeNo;
	NowDirectionNo = 0;
	PosY = 19;
	PosX = 3;
	NextShapeNo = getRnd7();
}
int Touch(){
	int i;
	for(i=0;i<4;i++)
	{
		char bottom = getNowBottom(i);
		if(bottom!=0)
		{
			if(bottom==PosY+1)
			{
				return 1;
			}
			if(getBoard(PosX+i,PosY-bottom)!=0)
			{
				return 1;
			}
		}
	}
	return 0;
}

void TouchDo(){
	int i,j;
	//add to board
	for(i=0;i<4;i++)
	{
		for(j=0;j<4;j++)
		{
			int x=PosX+i;
			int y=PosY-j;
			char block = getNowBlock(i,j);
			if(block!=0)
			{
				setBoard(x,y,block);
			}
		}
	}
	
	//clear line
	for(j=19;j>=0;j--)
	{
		char line=1;
		for(i=0;i<10;i++)
		{
			if(getBoard(i,j)==0)
			{
				line=0;
				break;
			}
		}
		if(line==1)
		{
			int k,l;
			for(k=0;k<10;k++)
			{
				if(j-1>=0)
				{
					setBoard(k,j-1,data[0x0380+getBoard(k,j-1)]);
				}
				if(j+1<20)
				{
					setBoard(k,j+1,data[0x0390+getBoard(k,j+1)]);
				}
				setBoard(k,j,0);
			}
			for(k=j;k<19;k++)
			{
				for(l=0;l<10;l++)
				{
					setBoard(l,k,getBoard(l,k+1));
				}
			}
		}
	}
	
	//is gameover
	for(i=0;i<10;i++)
	{
		if(getBoard(i,18)!=0)
		{
			Clear();
			break;
		}
	}
	NextShape();
}

int Any_Touch(){
	int i,j;
	if(PosX<0)
	{
		return 1;
	}
	if(getNowLeft()+PosX>10)
	{
		return 1;
	}
	for(i=0;i<4;i++)
	{
		for(j=0;j<4;j++)
		{
			int x=PosX+i;
			int y=PosY-j;
			int bottom = getNowBottom(i);
			if(PosY-bottom<-1)
			{
				return 1;
			}
			if(x>=0&&y>=0&&x<10&&y<20&&getNowBlock(i,j)!=0&&getBoard(x,y)!=0)
			{
				return 1;
			}
		}
	}
	return 0;
}
void rotate(int n){
	int left;
	NowDirectionNo=(NowDirectionNo+4+n)&3;
	left = getNowLeft();
	if(left+PosX>10)
	{
		PosX=10-left;
	}
	if(Any_Touch())
	{
		NowDirectionNo=(NowDirectionNo+4-n)&3;
	}
}

void movelr(int n){
	PosX+=n;
	if(Any_Touch()==1)
	{
		PosX-=n;
	}
}
void down(){
	while(Touch()!=1)
	{
		PosY--;
	}
	TouchDo();
}

void slowdown(){
	if(Touch()==1)
	{
		TouchDo();
	}
	PosY--;
}


//init
void init(){

	Clear();
	NextShape();
	NextShape();


	//document.onkeydown = keyDown;
	//setInterval("timing();",1000);
}

void setvram(int a,char v)
{
	*(char*)(0x2006)=a>>8;
	*(char*)(0x2006)=a & 0x00FF;
	*(char*)(0x2007)=v;
}

void setppu()
{
	*(char*)(0x2000) = 0x80; //00 00 00 00
	*(char*)(0x2001) = 0x1E; //00 01 10 00

	*(char*)(0x2006) = 0;
	*(char*)(0x2006) = 0;
}

void desetppu()
{
	*(char*)(0x2000) = 0x00; //00 00 00 00
	*(char*)(0x2001) = 0x00; //00 01 10 00

	*(char*)(0x2006) = 0;
	*(char*)(0x2006) = 0;
}

void setTile(int x,int y,char value)
{
	int base = 0x2020;
	base+=y<<5;
	base+=x;
	setvram(base,value);
}

//ui
void DrawBoard(){
	int i,j;
	/*
	for(i=0;i<4;i++)
	{
		for(j=0;j<4;j++)
		{
			//ImgNext[j][i].src = getNextBlock(i,j) + ".bmp";
			setTile(12+i,4+j,getNextBlock(i,j));
		}
	}
	
	for(i=0;i<10;i++)
	{
		for(j=0;j<20;j++)
		{
			//ImgBoard[j][i].src = getBoard(i,19-j)+".bmp";
			setTile(2+i,2+j,getBoard(i,19-j));
		}
	}
	*/
	for(i=0;i<4;i++)
	{
		for(j=0;j<4;j++)
		{
			int x,y;
			char block;
			x = i+PosX;
			y = j+19-PosY;
			block = getNowBlock(i,j);
			if(x<10&&y<20&&block!=0)
			{
				//ImgBoard[y][x].src = block+".bmp";
				setTile(2+i,2+j,block);
			}
		}
	}
}

char read_joystick_1(){
	   char n=8,joy_state=0;
	   *(char*)(0x4016)=01;		   //对_joystick写01
	   *(char*)(0x4016)=00;		   //对_joystick写00
	   while(n){
			joy_state=(joy_state<<1)|*(char*)(0x4016)&1;		//用循环读取每一个按键的值，并使按键状态值左移，以便将所有按键值集中在一个字节中
			--n; //循环次数减一
	   }
	   return joy_state; //返回按键状态值
}

void main()
{
	int i,j;
	char cc = 0;
	char vv = 0;
	int cnt = 0;
	
	//PosX=7;
	//PosY=7;
	
	for(i=0;i<512;i++)
	{
		setvram(0x0000+i,img[i]);
	}

	//clear back
	for(i=0;i<32;i++)
	{
		for(j=0;j<28;j++)
		{
			setTile(i,j,0x10);
		}
	}
	setvram(0x3F00,0x2C);
	setvram(0x3F01,0x30);
	setvram(0x3F02,0x00);
	setvram(0x3F03,0x3F);
	
	
	//show init title
	setTile(5,5,0x11);
	setTile(6,5,0x12);
	setTile(7,5,0x13);
	setTile(8,5,0x14);
	setTile(9,5,0x10);
	setTile(10,5,0x15);
	setTile(11,5,0x10);
	setTile(12,5,0x16);
	setTile(13,5,0x17);
	setTile(14,5,0x18);

	setTile(0,0,0x10);
	
	//init ppu
	setppu();

	while(1)
	{
		char key;
		getRnd7();
		key = read_joystick_1();
		if(key!=0)break;
	}	
	
	for(i=0;i<11;i++)
	{
		for(j=0;j<21;j++)
		{
			setTile(i+1,j+1,0x00);
		}
	}

	Clear();
	NextShape();
	NextShape();
	//Any_Touch();Any_Touch();Any_Touch();Any_Touch();Any_Touch();Any_Touch();Any_Touch();Any_Touch();Any_Touch();
	//movelr(-1);movelr(-1);movelr(-1);movelr(-1);movelr(-1);movelr(-1);movelr(-1);movelr(-1);
	//DrawBoard();
	//waitvblank();
	

	
	while(1)
	{
		char key;

		if(cnt++==50)
		{
			cnt=0;
			//slowdown();
		}
		//key = read_joystick_1();
		//key=0;
		//if(presskey(button_UP))slowdown();
		//if(presskey(button_DOWN))down();
		//if(presskey(button_LEFT))movelr(1);
		//if(presskey(button_RIGHT))movelr(-1);
		//if(presskey(button_A))rotate(1);
		//if(presskey(button_B))rotate(-1);

		//setTile(PosX+2,PosY+2,0x0A);
		DrawBoard();
		setTile(0,0,0x10);
		
		waitvblank();

	}
}








